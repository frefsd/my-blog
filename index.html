<!DOCTYPE html>
<html lang="zh">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>æˆ‘çš„åšå®¢ - é¦–é¡µ</title>
		<link rel="stylesheet" href="css/style.css" />
		<style>
			/* ä¸»ä½“æ ·å¼ */
			body {
				font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
				background-color: #f5f7fa;
				color: #333;
				margin: 0;
				padding: 0;
			}

			.container {
				max-width: 800px;
				margin: 2rem auto;
				padding: 0 1rem;
			}

			/* è±ªåä¸‹æ‹‰æ¡†æ ·å¼ */
			.filter-select {
				display: block;
				width: 100%;
				padding: 0.8rem 1rem;
				font-size: 1.05rem;
				font-weight: 500;
				color: #444;
				background-color: white;
				background-image: linear-gradient(180deg, #f9f9f9 0%, #eef2f6 100%),
					url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%23666' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14 2.451 5.658C2.088 5.289 2 4.781 2 4.334 2 3.598 2.58 3 3.279 3h9.442c.699 0 1.279.598 1.279 1.334 0 .447-.088.955-.451 1.324L8.753 11.14c-.192.189-.44.293-.707.293-.267 0-.515-.104-.707-.293z'/%3E%3C/svg%3E");
				background-repeat: no-repeat;
				background-position: right 1rem center;
				background-size: 1.2em;
				border: 1px solid #d1d8e0;
				border-radius: 16px;
				box-shadow: 0 4px 12px rgba(134, 158, 196, 0.15);
				appearance: none;
				position: relative;
				cursor: pointer;
				transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
				padding-right: 2.8rem;
				margin-bottom: 1.5rem;
				/* å¢åŠ ä¸‹æ–¹é—´è· */

			}

			/* æ‚¬åœæ•ˆæœ */
			.filter-select:hover {
				border-color: #9db2c9;
				box-shadow: 0 6px 16px rgba(134, 158, 196, 0.25);
				transform: translateY(-1px);
			}

			/* èšç„¦æ•ˆæœ */
			.filter-select:focus {
				outline: none;
				border-color: #4a6fa5;
				box-shadow: 0 0 0 3px rgba(74, 111, 165, 0.2), 0 6px 16px rgba(74, 111, 165, 0.15);
				background-color: white;
				transform: translateY(-2px);
			}

			.dark-mode .filter-select {
				background: linear-gradient(180deg, #333c4a 0%, #2b333e 100%),
					url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%23aaa' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14 2.451 5.658C2.088 5.289 2 4.781 2 4.334 2 3.598 2.58 3 3.279 3h9.442c.699 0 1.279.598 1.279 1.334 0 .447-.088.955-.451 1.324L8.753 11.14c-.192.189-.44.293-.707.293-.267 0-.515-.104-.707-.293z'/%3E%3C/svg%3E");
				background-repeat: no-repeat;
				background-position: right 1rem center;
				background-size: 1.2em;
				border-color: #444d5a;
				color: #e0e0e0;
			}

			.dark-mode .filter-select:hover {
				border-color: #667;
				box-shadow: 0 6px 16px rgba(100, 120, 160, 0.2);
			}

			.dark-mode .filter-select:focus {
				border-color: #6b8ed6;
				box-shadow: 0 0 0 3px rgba(107, 142, 214, 0.25), 0 6px 16px rgba(107, 142, 214, 0.15);
			}

			/* æŒ‰ä¸‹æ•ˆæœ */
			.filter-select:active {
				transform: translateY(0);
				box-shadow: 0 2px 8px rgba(134, 158, 196, 0.15);
			}

			/* æ–‡ç« åˆ—è¡¨ */
			.post-item {
				margin-bottom: 2rem;
				padding: 1rem;
				background: white;
				border-radius: 12px;
				box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
				transition: transform 0.3s, box-shadow 0.3s;
			}

			.post-item:hover {
				transform: translateY(-2px);
				box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
			}

			.post-item h2 {
				margin: 0 0 0.5rem 0;
				color: #4a6fa5;
				font-size: 1.4rem;
			}

			.post-item .date {
				color: #666;
				font-size: 0.9rem;
				margin-bottom: 0.5rem;
			}

			.post-item .excerpt {
				color: #555;
				line-height: 1.6;
			}

			.post-item .category-tag {
				display: inline-block;
				padding: 0.2rem 0.6rem;
				background: #4a6fa5;
				color: white;
				border-radius: 12px;
				font-size: 0.8rem;
				margin-top: 0.5rem;
			}

			/* æ•°å­—é›¨æ»´Canvasæ ·å¼ */
			#rainCanvas {
				position: fixed;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				z-index: -1;
				pointer-events: none;
			}

			/*æš—é»‘æ¨¡å¼æ ·å¼ï¼ˆç‹¬ç«‹å†™åœ¨æœ€å¤–å±‚ï¼‰*/
			.dark-mode {
				background-color: #1a1a1a !important;
				color: #e0e0e0 !important;
			}

			.dark-mode .container,
			.dark-mode .post-item,
			.dark-mode header,
			.dark-mode footer {
				background-color: #242424 !important;
				color: #e0e0e0 !important;
				border-color: #444 !important;
			}

			.dark-mode .post-item a {
				color: #8ba7ef !important;
			}

			.dark-mode .search-box input,
			.dark-mode .filter-select {
				background-color: #333 !important;
				color: #e0e0e0 !important;
				border-color: #555 !important;
			}

			.dark-mode .search-box svg {
				fill: #aaa !important;
			}

			.dark-mode .category-tag {
				background-color: #6b8ed6 !important;
			}

			.dark-mode footer {
				color: #aaa !important;
			}

			.dark-mode nav a {
				color: #aaa !important;
			}

			.dark-mode .no-results {
				color: #999 !important;
			}

			/*æ ‡é¢˜åŠ¨æ„Ÿ*/
			.dynamic-title {
				font-size: 2.8rem;
				color: #4a6fa5;
				margin: 0;
				font-weight: bold;
				letter-spacing: 1px;
				text-align: center;

				/* æ¢å¤å‘å…‰é˜´å½± */
				text-shadow: 0 0 10px rgba(0, 0, 0, 0.5), 0 0 20px rgba(255, 255, 255, 0.6);

				/* æ·»åŠ è„‰åŠ¨åŠ¨ç”» */
				animation: pulse 2s ease-in-out infinite alternate;
			}

			/* å®šä¹‰è„‰åŠ¨åŠ¨ç”» */
			@keyframes pulse {
				from {
					transform: scale(1);
				}

				to {
					transform: scale(1.05);
				}
			}
		</style>
	</head>

	<script>
		// ===== æš—é»‘æ¨¡å¼åˆ‡æ¢åŠŸèƒ½ =====
		const DARK_MODE_KEY = 'dark-mode-preference';

		// åˆ›å»ºæš—é»‘æ¨¡å¼æŒ‰é’®å’Œæ ·å¼
		function initDarkMode() {
			// æ£€æŸ¥ç”¨æˆ·åå¥½
			const isDarkMode = localStorage.getItem(DARK_MODE_KEY) === 'true';

			// è®¾ç½® body ç±»
			if (isDarkMode) {
				document.body.classList.add('dark-mode');
			}

			// åˆ›å»ºæŒ‰é’®
			const toggleButton = document.createElement('button');
			toggleButton.id = 'dark-mode-toggle';
			toggleButton.innerHTML = isDarkMode ?
				'ğŸŒ' // ç™½å¤©
				:
				'ğŸŒ™'; // æš—é»‘
			toggleButton.title = isDarkMode ? 'åˆ‡æ¢åˆ°ç™½å¤©æ¨¡å¼' : 'åˆ‡æ¢åˆ°æš—é»‘æ¨¡å¼';
			toggleButton.style.cssText = `
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      border: none;
      background: ${isDarkMode ? '#f0f0f0' : '#333'};
      color: ${isDarkMode ? '#333' : '#f0f0f0'};
      font-size: 1.5rem;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      z-index: 9999;
      transition: all 0.3s ease;
    `;
			toggleButton.onclick = function() {
				const isNowDark = !document.body.classList.contains('dark-mode');
				document.body.classList.toggle('dark-mode', isNowDark);
				localStorage.setItem(DARK_MODE_KEY, isNowDark);
				toggleButton.innerHTML = isNowDark ? 'ğŸŒ' : 'ğŸŒ™';
				toggleButton.style.background = isNowDark ? '#f0f0f0' : '#333';
				toggleButton.style.color = isNowDark ? '#333' : '#f0f0f0';
				toggleButton.title = isNowDark ? 'åˆ‡æ¢åˆ°ç™½å¤©æ¨¡å¼' : 'åˆ‡æ¢åˆ°æš—é»‘æ¨¡å¼';
			};

			document.body.appendChild(toggleButton);
		}

		// æ•°å­—é›¨æ»´æ•ˆæœä»£ç 
		document.addEventListener('DOMContentLoaded', function() {
			const canvas = document.createElement('canvas');
			canvas.id = 'rainCanvas';
			document.body.appendChild(canvas);

			const ctx = canvas.getContext('2d');
			canvas.width = window.innerWidth;
			canvas.height = window.innerHeight;

			const chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ';
			let particles = [];

			class Particle {
				constructor() {
					this.reset();
				}

				reset() {
					this.x = Math.random() * canvas.width;
					this.y = Math.random() * -canvas.height;
					this.speedY = Math.random() * 2 + 2; /*æ›´æ”¹ç²’å­é€Ÿåº¦çš„åˆå§‹é€Ÿåº¦*/
					this.speedX = (Math.random() - 0.5) * 0.5;
					this.size = Math.random() * 20 + 15;
					this.opacity = Math.random() * 0.5 + 0.5;
					this.char = chars[Math.floor(Math.random() * chars.length)];
					this.gravity = 0.05; /*æ›´æ”¹ç²’å­çš„åŠ é€Ÿåº¦*/
					this.windResistance = 0.98;
					this.changeInterval = Math.floor(Math.random() * 10) + 5;
					this.frameCount = 0;
				}

				update() {
					this.speedY += this.gravity;
					this.speedX *= this.windResistance;

					this.x += this.speedX;
					this.y += this.speedY;

					this.frameCount++;
					if (this.frameCount >= this.changeInterval) {
						this.char = chars[Math.floor(Math.random() * chars.length)];
						this.frameCount = 0;
					}

					if (this.y > canvas.height || this.x < 0 || this.x > canvas.width) {
						this.reset();
						this.y = Math.random() * -50;
					}
				}

				draw() {
					ctx.font = `${this.size}px 'Courier New', monospace`;
					ctx.fillStyle = `rgba(0, 255, 0, ${this.opacity})`;
					ctx.fillText(this.char, this.x, this.y);
				}
			}

			function initParticles(count) {
				particles = [];
				for (let i = 0; i < count; i++) {
					particles.push(new Particle());
				}
			}

			function animate() {
				ctx.fillStyle = 'rgba(15, 12, 41, 0.1)';
				ctx.fillRect(0, 0, canvas.width, canvas.height);

				particles.forEach(particle => {
					particle.update();
					particle.draw();
				});

				requestAnimationFrame(animate);
			}

			window.addEventListener('resize', function() {
				canvas.width = window.innerWidth;
				canvas.height = window.innerHeight;
			});

			// æ ¹æ®å±å¹•å¤§å°è‡ªåŠ¨è°ƒæ•´ç²’å­æ•°é‡
			const isMobile = window.innerWidth <= 768;
			initParticles(isMobile ? 40 : 100);

			// åˆå§‹åŒ–å¹¶å¼€å§‹åŠ¨ç”»
			initParticles(80); // å‡å°‘ç²’å­æ•°é‡ä»¥æé«˜æ€§èƒ½
			animate();
		});

		// åˆå§‹åŒ–
		document.addEventListener('DOMContentLoaded', initDarkMode);
	</script>

	<body>

		<header class="hero-header">
			<video autoplay muted loop playsinline class="hero-video">
				<source src="video/wt.mp4" type="video/mp4">
			</video>
			/*ç»™èƒŒæ™¯åŠ ä¸€å±‚é®ç›–è†œ*/
			<div class="hero-overlay"></div>
			<div class="hero-content"> 
				<h1 class="dynamic-title" id="title">ä¸€æ¡æƒ³åŠªåŠ›çš„å’¸é±¼</h1>
			</div>
			<nav class="responsive-nav">
				<a href="index.html">é¦–é¡µ</a>
				<a href="about.html">å…³äº</a>
				<a href="growup.html">æˆé•¿</a>
			</nav>
		</header>

		<main id="home-container" class="container">
			<p>æ­£åœ¨åŠ è½½æ–‡ç« ...</p>
		</main>

		<footer style="text-align: center; padding: 1.5rem 0; color: #666; font-size: 0.9rem;">
			&copy; å’¸é±¼ç¿»èº«
		</footer>

		<script>
			// ===== åŠ¨æ€æ ‡é¢˜æ‚¬åœå˜è‰²åŠŸèƒ½ =====
			function initDynamicTitle() {
				const title = document.getElementById('title');
				if (!title) return;

				// å®šä¹‰ä¸€äº›å¥½çœ‹çš„éœ“è™¹/å‘å…‰é¢œè‰²
				const colors = [{
						text: '#ffdd57',
						shadow: 'rgba(255, 221, 87, 1)'
					}, // é‡‘è‰²
					{
						text: '#00ffff',
						shadow: 'rgba(0, 255, 255, 1)'
					}, // é’è‰²
					{
						text: '#ff00ff',
						shadow: 'rgba(255, 0, 255, 1)'
					}, // æ´‹çº¢/å“çº¢
					{
						text: '#00ff88',
						shadow: 'rgba(0, 255, 136, 1)'
					}, // è§å…‰ç»¿
					{
						text: '#ff6600',
						shadow: 'rgba(255, 102, 0, 1)'
					}, // æ©™è‰²
					{
						text: '#aa00ff',
						shadow: 'rgba(170, 0, 255, 1)'
					}, // ç´«è‰²
					{
						text: '#ff3399',
						shadow: 'rgba(255, 51, 153, 1)'
					}, // ç²‰çº¢
					{
						text: '#00ccff',
						shadow: 'rgba(0, 204, 255, 1)'
					}, // å¤©è“
				];

				// å­˜å‚¨åŸå§‹æ ·å¼ï¼ˆä» CSS è·å–åˆå§‹å€¼ï¼‰
				const originalStyle = {
					color: getComputedStyle(title).color,
					textShadow: getComputedStyle(title).textShadow,
					transform: getComputedStyle(title).transform,
				};

				function getRandomColor() {
					return colors[Math.floor(Math.random() * colors.length)];
				}

				title.addEventListener('mouseenter', function() {
					const color = getRandomColor();
					title.style.color = color.text;
					title.style.textShadow = `
		        0 0 10px ${color.shadow},
		        0 0 20px ${color.shadow},
		        0 0 30px ${color.shadow}
		      `;
					title.style.transform = 'scale(1.05)';
					title.style.transition = 'all 0.3s ease';
				});

				title.addEventListener('mouseleave', function() {
					// æ¢å¤åŸå§‹æ ·å¼
					title.style.color = originalStyle.color;
					title.style.textShadow = originalStyle.textShadow;
					title.style.transform = originalStyle.transform;
				});
			}

			// ===== æ–‡ç« åˆ—è¡¨åŠ è½½ä¸ç­›é€‰åŠŸèƒ½ =====
			function initBlogPosts() {
				const container = document.getElementById('home-container');
				let currentCategory = ''; // å½“å‰é€‰ä¸­çš„åˆ†ç±»
				let searchKeyword = ''; // å½“å‰æœç´¢è¯

				fetch('posts.json')
					.then(res => {
						if (!res.ok) throw new Error(`HTTP ${res.status}`);
						return res.json();
					})
					.then(posts => {
						if (!posts || posts.length === 0) {
							container.innerHTML = '<p>æš‚æ— æ–‡ç« ã€‚</p>';
							return;
						}

						// æå–æ‰€æœ‰å”¯ä¸€åˆ†ç±»
						const categories = ['å…¨éƒ¨'];
						const categorySet = new Set(posts.map(p => p.category));
						categories.push(...Array.from(categorySet).sort());

						// æ¸²æŸ“å‡½æ•°
						function renderPosts() {
							let filtered = posts;

							if (currentCategory && currentCategory !== 'å…¨éƒ¨') {
								filtered = filtered.filter(p => p.category === currentCategory);
							}

							if (searchKeyword) {
								const keyword = searchKeyword.toLowerCase();
								filtered = filtered.filter(p =>
									p.title.toLowerCase().includes(keyword) ||
									(p.excerpt && p.excerpt.toLowerCase().includes(keyword))
								);
							}

							// ç”Ÿæˆæ–‡ç«  HTML
							const postList = filtered.length > 0 ?
								filtered.map((post, index) => {
									const postId = posts.indexOf(post);
									return `
		                  <article class="post-item">
		                    <h2><a href="post.html?id=${postId}" style="color: #4a6fa5; text-decoration: none;">${post.title}</a></h2>
		                    <p class="date">${post.date}</p>
		                    <p class="excerpt">${post.excerpt || 'æš‚æ— æ‘˜è¦'}</p>
		                    <span class="category-tag">${post.category}</span>
		                  </article>
		                `;
								}).join('') :
								`<div class="no-results">æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„æ–‡ç« ã€‚</div>`;

							container.innerHTML = `
		            <div>
		              <!-- åˆ†ç±»ä¸‹æ‹‰æ¡† -->
		              <select class="filter-select" id="category-filter">
		                ${categories.map(cat => `<option value="${cat}" ${cat === currentCategory ? 'selected' : ''}>${cat}</option>`).join('')}
		              </select>
		
		              <!-- æ–‡ç« åˆ—è¡¨ -->
		              <div id="posts-list">${postList}</div>
		            </div>
		          `;

							// ç»‘å®šäº‹ä»¶
							bindEvents();
						}

						// ç»‘å®šäº‹ä»¶ç›‘å¬
						function bindEvents() {
							const container = document.getElementById('home-container');
							container.addEventListener('input', function(e) {
								if (e.target.id === 'search-input') {
									searchKeyword = e.target.value.trim();
									renderPosts();
								}
							});
							container.addEventListener('change', function(e) {
								if (e.target.id === 'category-filter') {
									currentCategory = e.target.value;
									renderPosts();
								}
							});
						}

						// åˆå§‹æ¸²æŸ“
						renderPosts();
					})
					.catch(err => {
						container.innerHTML = `<p style="color:red;">åŠ è½½å¤±è´¥: ${err.message}</p>`;
					});
			}

			// ===== åˆå§‹åŒ–æ‰€æœ‰åŠŸèƒ½ =====
			document.addEventListener('DOMContentLoaded', function() {
				initDynamicTitle(); // åˆå§‹åŒ–æ ‡é¢˜å˜è‰²
				initBlogPosts(); // åˆå§‹åŒ–æ–‡ç« åˆ—è¡¨
			});
		</script>
	</body>
</html>